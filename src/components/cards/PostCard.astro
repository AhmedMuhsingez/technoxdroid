---
import ShortNewsCard from './ShortNewsCard.astro'
import Card from './Card.astro'
const {
	id,
	title,
	description,
	pubDate,
	heroImage,
	category,
	slug,
	isShortNews,
	author,
	isMovies
} = Astro.props
const activeMovies = 'group-hover:text-movies-active group-hover:dark:text-movies-active'
---

{
	isShortNews ? (
		<ShortNewsCard
			id={id}
			title={title}
			description={description}
			pubDate={pubDate}
			heroImage={heroImage}
			category={category}
			author={author}
			slug={slug}
			isMovies={isMovies}
			activeMovies={activeMovies}
		/>
	) : (
		<Card
			id={id}
			title={title}
			description={description}
			pubDate={pubDate}
			heroImage={heroImage}
			category={category}
			author={author}
			slug={slug}
			isMovies={isMovies}
			activeMovies={activeMovies}
		/>
	)
}

<script>
	import { animate } from 'motion'

	const images = document.querySelectorAll('img')

	document.addEventListener('DOMContentLoaded', function () {
		const showAnimations = localStorage.getItem('animations') === 'true'

		if (showAnimations) {
			animate(
				'.effect',
				{
					opacity: [0, 1],
					clipPath: ['circle(0% at 0% 0%)', 'circle(100% at 50% 50%)']
				},
				{ duration: 2, easing: 'ease' }
			)
		} else {
			images.forEach((img) => {
				img.classList.remove('opacity-0')
			})
		}
	})
</script>
